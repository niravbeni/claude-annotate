@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-sans);
  --font-serif: var(--font-serif);
  --font-mono: var(--font-mono);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}

:root {
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.556 0 0);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
    font-family: var(--font-sans);
    font-size: 14px;
    line-height: 1.4;
    font-weight: 400;
  }
}

/* Custom annotation styles */
.annotation-heart {
  display: inline;
  background: rgba(198, 97, 63, 0.15);
  padding: 2px 4px;
  border-radius: 3px;
  cursor: pointer;
}

.annotation-heart::after {
  content: "";
  display: inline-block;
  vertical-align: super;
  width: 13px;
  height: 13px;
  margin-left: 3px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23C6613F' stroke='none'%3E%3Cpath d='M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z'/%3E%3C/svg%3E");
  background-size: contain;
  background-repeat: no-repeat;
  transform: rotate(8deg) translateY(1px);
  pointer-events: none;
}

/* Heart highlight without icon (for middle segments of split hearts) */
.annotation-heart-body {
  display: inline;
  background: rgba(198, 97, 63, 0.15);
  padding: 2px 4px;
  border-radius: 3px;
  cursor: pointer;
}

.annotation-squiggle {
  text-decoration: underline wavy #C6613F;
  text-decoration-thickness: 1.5px;
  text-underline-offset: 3px;
  text-decoration-skip-ink: none; /* Continue under ALL letters including y, g, p, q, j */
  cursor: pointer;
  display: inline !important;
}

.annotation-circle {
  position: relative;
  display: inline;
  cursor: pointer;
  padding: 4px 6px;
  z-index: 2; /* Higher than heart/squiggle to show on top */
  isolation: isolate;
}

.annotation-circle::before {
  content: "";
  position: absolute;
  top: -6px;
  left: -6px;
  right: -6px;
  bottom: -6px;
  border: 2.5px solid #E76F51;
  border-radius: 50% 48% 52% 49% / 48% 51% 49% 52%;
  pointer-events: none;
  transform: rotate(-2deg);
  z-index: -1;
  background: transparent;
}

/* Remove pointer cursor on annotations when in non-interactive overlay (edit mode) */
.pointer-events-none .annotation-heart,
.pointer-events-none .annotation-heart-body,
.pointer-events-none .annotation-squiggle,
.pointer-events-none .annotation-circle {
  cursor: text !important;
}

.pointer-events-none * {
  cursor: text !important;
}

/* Editor font - Anthropic Serif for Claude Response text */
.editor-text {
  font-family: var(--font-serif);
  font-size: 17px;
  line-height: 1.6;
  font-weight: 400;
  color: #1a1a1a !important;
}

.editor-text * {
  color: #1a1a1a !important;
}

/* Smooth transitions for annotations */
.annotation-transition {
  transition: opacity 200ms ease-in-out;
}

.annotation-hidden {
  background: none !important;
  text-decoration: none !important;
  border: none !important;
  box-shadow: none !important;
}

.annotation-hidden::before {
  content: none !important;
}

/* Typography System - UI (Anthropic Sans) */
.text-ui-display {
  font-family: var(--font-serif);
  font-size: 28px;
  line-height: 1.4;
  font-weight: 400;
  letter-spacing: -0.02em;
}

.text-ui-title {
  font-family: var(--font-serif);
  font-size: 28px;
  line-height: 1.4;
  font-weight: 500;
  letter-spacing: -0.02em;
}

.text-ui-body-large {
  font-family: var(--font-sans);
  font-size: 17px;
  line-height: 1.4;
  font-weight: 400;
}

.text-ui-body-large-bold {
  font-family: var(--font-sans);
  font-size: 17px;
  line-height: 1.4;
  font-weight: 600;
}

.text-ui-body {
  font-family: var(--font-sans);
  font-size: 14px;
  line-height: 1.4;
  font-weight: 400;
}

.text-ui-body-bold {
  font-family: var(--font-sans);
  font-size: 14px;
  line-height: 1.4;
  font-weight: 600;
}

.text-ui-body-small {
  font-family: var(--font-sans);
  font-size: 13px;
  line-height: 1.4;
  font-weight: 400;
}

.text-ui-body-small-bold {
  font-family: var(--font-sans);
  font-size: 13px;
  line-height: 1.4;
  font-weight: 600;
}

.text-ui-body-extra-small {
  font-family: var(--font-sans);
  font-size: 11px;
  line-height: 1.4;
  font-weight: 400;
}

/* Typography System - Claude Response (Anthropic Serif) */
.text-claude-title {
  font-family: var(--font-serif);
  font-size: 28px;
  line-height: 1.4;
  font-weight: 450;
}

.text-claude-heading {
  font-family: var(--font-serif);
  font-size: 24px;
  line-height: 1.3;
  font-weight: 450;
}

.text-claude-subheading {
  font-family: var(--font-serif);
  font-size: 20px;
  line-height: 1.3;
  font-weight: 650;
}

.text-claude-body {
  font-family: var(--font-serif);
  font-size: 17px;
  line-height: 1.6;
  font-weight: 400;
}

.text-claude-body-italic {
  font-family: var(--font-serif);
  font-size: 17px;
  line-height: 1.6;
  font-weight: 400;
  font-style: italic;
}

.text-claude-body-bold {
  font-family: var(--font-serif);
  font-size: 17px;
  line-height: 1.6;
  font-weight: 650;
}

.text-claude-body-bold-italic {
  font-family: var(--font-serif);
  font-size: 17px;
  line-height: 1.6;
  font-weight: 650;
  font-style: italic;
}

.text-claude-body-small {
  font-family: var(--font-serif);
  font-size: 16px;
  line-height: 1.5;
  font-weight: 400;
}

.text-claude-body-small-bold {
  font-family: var(--font-serif);
  font-size: 16px;
  line-height: 1.5;
  font-weight: 650;
}

/* Typography System - Code (JetBrains Mono) */
.text-code {
  font-family: var(--font-mono);
  font-size: 16px;
  line-height: 1.5;
  font-weight: 400;
}

.text-code-bold {
  font-family: var(--font-mono);
  font-size: 16px;
  line-height: 1.5;
  font-weight: 650;
}

.text-code-small {
  font-family: var(--font-mono);
  font-size: 14px;
  line-height: 1.5;
  font-weight: 400;
}

.text-code-small-bold {
  font-family: var(--font-mono);
  font-size: 14px;
  line-height: 1.5;
  font-weight: 650;
}

/* Toast notifications - UI typography */
[data-sonner-toast] {
  font-family: var(--font-sans) !important;
  font-size: 14px !important;
  line-height: 1.4 !important;
}

[data-sonner-toast] [data-title] {
  font-weight: 600;
}

[data-sonner-toast] [data-description] {
  font-size: 13px;
}

/* Uncertain comments - italicize when Claude is unsure */
.uncertain-comment {
  font-style: italic;
}

/* Lighter bold text in tooltips and history cards */
.uncertain-comment strong,
.text-ui-body-small strong,
.text-gray-800 strong,
div.text-ui-body-small strong,
div.text-gray-800 strong,
span strong {
  color: #374151 !important;
  font-weight: 600;
}

/* Thin scrollbars with spacing for saved annotations */
.saved-list-scroll {
  padding-right: 8px;
}

.saved-list-scroll::-webkit-scrollbar {
  width: 6px;
}

.saved-list-scroll::-webkit-scrollbar-track {
  background: transparent;
  margin-right: 4px;
}

.saved-list-scroll::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 3px;
}

.saved-list-scroll::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

/* Thin scrollbars for chat history in saved annotations */
.saved-chat-scroll {
  padding-right: 12px;
  margin-right: -4px;
}

.saved-chat-scroll::-webkit-scrollbar {
  width: 6px;
}

.saved-chat-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.saved-chat-scroll::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 3px;
}

.saved-chat-scroll::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

/* Thin scrollbars for active chat messages area */
.active-chat-scroll {
  padding-right: 12px;
  margin-right: -4px;
}

.active-chat-scroll::-webkit-scrollbar {
  width: 6px;
}

.active-chat-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.active-chat-scroll::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 3px;
}

.active-chat-scroll::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

/* Thin scrollbars for chat input textarea */
.chat-input-scroll::-webkit-scrollbar {
  width: 4px;
}

.chat-input-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.chat-input-scroll::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 2px;
}

.chat-input-scroll::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

/* Thin scrollbars for editor textarea */
.editor-scroll::-webkit-scrollbar {
  width: 6px;
}

.editor-scroll::-webkit-scrollbar-track {
  background: transparent;
  margin-top: 8px;
  margin-bottom: 8px;
}

.editor-scroll::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 3px;
}

.editor-scroll::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}
